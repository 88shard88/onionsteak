<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WAYPOINT OST - Track 07</title>

<style>
body{
    margin:0;
    background:#e9e9e9;
    font-family: Georgia, "Times New Roman", serif;
}

/* ---------------- TOP BAR ---------------- */

.topbar{
    background:black;
    color:white;
    padding:20px 40px;
    font-family: Helvetica, Arial, sans-serif;
    font-style: italic;
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-size:26px;
}

.topbar .right{
    font-size:20px;
}

/* ---------------- CENTER SECTION ---------------- */

.center{
    text-align:center;
    padding:40px 0 20px 0;
}

.center img{
    width:500px;
    max-width:80%;
}

.title{
    margin-top:30px;
    font-size:34px;
    letter-spacing:1px;
}

.subtitle{
    font-size:22px;
    margin-top:8px;
}

/* ---------------- PLAYER BAR ---------------- */

.player{
    position:fixed;
    bottom:0;
    width:100%;
    background:black;
    color:white;
    padding:20px 40px;
    box-sizing:border-box;
}

.progress-container{
    display:flex;
    align-items:center;
    gap:20px;
}

.time{
    width:60px;
    font-size:22px;
    font-family: Helvetica, Arial, sans-serif;
}

.progress{
    flex:1;
    position:relative;
    height:6px;
    background:#555;
    cursor:pointer;
}

.progress-filled{
    position:absolute;
    height:100%;
    width:0%;
    background:white;
}

.progress-handle{
    position:absolute;
    top:50%;
    transform:translate(-50%, -50%);
    width:18px;
    height:18px;
    background:white;
    border-radius:50%;
    left:0%;
    cursor:pointer;
}

.controls{
    margin-top:20px;
    text-align:center;
}

.controls button{
    background:none;
    border:none;
    color:white;
    font-size:34px;
    margin:0 30px;
    cursor:pointer;
}

.loop-active{
    opacity:1;
}

.loop-inactive{
    opacity:0.4;
}
</style>
</head>
<body>

<div class="topbar">
    <div>track 07 ‚Äì Onion Steak / Battle</div>
    <div class="right">WAYPOINT original soundtrack</div>
</div>

<div class="center">
    <img src="cover.png" alt="cover">
    <div class="title">WAYPOINT</div>
    <div class="subtitle">ORIGINAL SOUNDTRACK<br>by 88shard88 / 'M'</div>
</div>

<div class="player">

    <div class="progress-container">
        <div class="time" id="current">0:00</div>

        <div class="progress" id="progress">
            <div class="progress-filled" id="filled"></div>
            <div class="progress-handle" id="handle"></div>
        </div>

        <div class="time" id="duration">0:00</div>
    </div>

    <div class="controls">
        <button id="play">‚ñ∂</button>
        <button id="pause" style="display:none;">‚ùö‚ùö</button>
        <button id="loop" class="loop-inactive">üîÅ</button>
    </div>

</div>

<audio id="audio" src="track.mp3"></audio>

<script>
const audio = document.getElementById("audio");
const playBtn = document.getElementById("play");
const pauseBtn = document.getElementById("pause");
const loopBtn = document.getElementById("loop");
const progress = document.getElementById("progress");
const filled = document.getElementById("filled");
const handle = document.getElementById("handle");
const current = document.getElementById("current");
const duration = document.getElementById("duration");

let isDragging = false;
let loopEnabled = false;

/* Format time */
function formatTime(sec){
    const minutes = Math.floor(sec/60);
    const seconds = Math.floor(sec%60).toString().padStart(2,"0");
    return `${minutes}:${seconds}`;
}

/* Metadata loaded */
audio.addEventListener("loadedmetadata",()=>{
    duration.textContent = formatTime(audio.duration);
});

/* Update progress */
audio.addEventListener("timeupdate",()=>{
    if(isDragging) return;

    const percent = (audio.currentTime/audio.duration)*100;
    filled.style.width = percent + "%";
    handle.style.left = percent + "%";
    current.textContent = formatTime(audio.currentTime);
});

/* End behavior */
audio.addEventListener("ended",()=>{
    if(loopEnabled){
        audio.currentTime = 0;
        audio.play();
    }else{
        playBtn.style.display="inline";
        pauseBtn.style.display="none";
    }
});

/* Play / Pause */
playBtn.onclick = ()=>{
    audio.play();
    playBtn.style.display="none";
    pauseBtn.style.display="inline";
};

pauseBtn.onclick = ()=>{
    audio.pause();
    pauseBtn.style.display="none";
    playBtn.style.display="inline";
};

/* Loop toggle */
loopBtn.onclick = ()=>{
    loopEnabled = !loopEnabled;
    if(loopEnabled){
        loopBtn.classList.remove("loop-inactive");
        loopBtn.classList.add("loop-active");
    }else{
        loopBtn.classList.remove("loop-active");
        loopBtn.classList.add("loop-inactive");
    }
};

/* Drag functionality */
function setProgress(e){
    const rect = progress.getBoundingClientRect();
    const percent = (e.clientX - rect.left)/rect.width;
    audio.currentTime = percent * audio.duration;
}

progress.addEventListener("mousedown",(e)=>{
    isDragging=true;
    audio.pause();
    setProgress(e);
});

document.addEventListener("mousemove",(e)=>{
    if(isDragging){
        setProgress(e);
    }
});

document.addEventListener("mouseup",()=>{
    if(isDragging){
        isDragging=false;
        audio.play();
    }
});
</script>

</body>
</html>
